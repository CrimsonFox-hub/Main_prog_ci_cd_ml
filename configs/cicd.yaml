# Конфигурация CI/CD
environments:
  staging:
    name: "staging"
    cluster: "credit-scoring-staging"
    namespace: "ml-staging"
    domain: "staging.158.160.209.225.nip.io"
    replicas: 2
    
  production:
    name: "production"
    cluster: "credit-scoring-production"
    namespace: "ml-production"
    domain: "credit-scoring.your-bank.com"
    replicas: 3

deployment:
  strategy: "blue-green"
  
  canary:
    enabled: true
    steps: [10, 25, 50, 100]
    step_duration_minutes: 5
    
  rollback:
    enabled: true
    automatic: true
    conditions:
      - "error_rate > 5%"
      - "latency_p95 > 500ms"
      - "health_check_fails > 3"

testing:
  unit:
    enabled: true
    command: "pytest tests/unit -v --cov=src --cov-report=xml"
    
  integration:
    enabled: true
    command: "pytest tests/integration -v"
    
  load:
    enabled: true
    users: 100
    duration: "1m"
    spawn_rate: 10
    
  security:
    enabled: true
    tools: ["bandit", "safety", "trivy"]
    
  model:
    enabled: true
    tests: ["accuracy", "latency", "memory"]

notifications:
  slack:
    enabled: true
    webhook: "${SLACK_WEBHOOK}"
    channel: "#mlops-alerts"
    
  email:
    enabled: true
    recipients: ["ml-team@your-bank.com"]
    
  telegram:
    enabled: false
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"