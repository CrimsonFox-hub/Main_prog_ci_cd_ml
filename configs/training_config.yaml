# Конфигурация обучения модели
project:
  name: "credit-scoring-mlops"
  version: "1.0.0"
  description: "Промышленная система кредитного скоринга с полным MLOps циклом"

data:
  raw_path: "data/raw"
  processed_path: "data/processed"
  train_path: "data/processed/train.csv"
  test_path: "data/processed/test.csv"
  validation_path: "data/processed/validation.csv"
  target_column: "default"
  
  numerical_features:
    - "age"
    - "income"
    - "credit_amount"
    - "loan_duration"
    - "payment_to_income"
    - "existing_credits"
    - "dependents"
    - "residence_since"
    - "installment_rate"
  
  categorical_features:
    - "credit_history"
    - "purpose"
    - "savings"
    - "employment_duration"
    - "personal_status"
    - "debtors"
    - "property"
    - "other_installment_plans"
    - "housing"
    - "job"
    - "telephone"
    - "foreign_worker"
  
  important_features:
    - "credit_amount"
    - "payment_to_income"
    - "credit_history"
    - "age"
    - "employment_duration"

model:
  name: "CreditScoringNeuralNetwork"
  version: "1.0.0"
  hidden_layers: [128, 64, 32]
  dropout_rate: 0.3
  activation: "relu"
  output_activation: "sigmoid"
  
  paths:
    best_model: "models/trained/best_model.pth"
    final_model: "models/trained/final_model.pth"
    onnx_model: "models/trained/credit_scoring.onnx"
    onnx_quantized: "models/trained/credit_scoring_quantized.onnx"
    scaler: "models/trained/scaler.pkl"
    metrics: "models/trained/training_metrics.json"
    config: "models/trained/model_config.json"

training:
  epochs: 100
  batch_size: 64
  learning_rate: 0.001
  weight_decay: 0.0001
  early_stopping_patience: 10
  validation_split: 0.2
  random_seed: 42
  
  optimizer:
    name: "adam"
    beta1: 0.9
    beta2: 0.999
    eps: 1e-8
  
  scheduler:
    name: "reduce_lr_on_plateau"
    factor: 0.5
    patience: 5
    min_lr: 1e-6

optimization:
  enable_pruning: true
  pruning_amount: 0.2
  enable_quantization: true
  quantization_type: "int8"
  
  benchmark:
    num_samples: 10000
    batch_sizes: [1, 8, 16, 32, 64]
    warmup_iterations: 100
    measurement_iterations: 1000

mlflow:
  tracking_uri: "http://mlflow-server:5000"
  experiment_name: "credit-scoring"
  registered_model_name: "credit-scoring-model"
  artifact_location: "s3://mlflow-artifacts/credit-scoring"
  
  tracking:
    enable: true
    log_metrics: true
    log_params: true
    log_artifacts: true
    log_model: true

monitoring:
  drift:
    data_drift_threshold: 0.2
    concept_drift_threshold: 0.15
    performance_decay_threshold: 0.05
    check_interval_hours: 24
    min_samples_for_drift: 1000
    
  alerts:
    enable_slack: true
    enable_email: true
    enable_pagerduty: false
    
    thresholds:
      critical_data_drift: 0.3
      warning_data_drift: 0.2
      critical_concept_drift: 0.25
      warning_concept_drift: 0.15
      critical_performance_decay: 0.1
      warning_performance_decay: 0.05
  
  retraining:
    enable_auto_retraining: true
    min_retraining_interval_days: 7
    max_retraining_interval_days: 30
    retrain_on_drift: true
    retrain_on_performance_decay: true
    
    triggers:
      data_drift_score: 0.25
      concept_drift_score: 0.2
      performance_decay: 0.05
      new_data_percentage: 10

deployment:
  api_version: "v1"
  port: 8000
  workers: 4
  max_request_size: "10MB"
  timeout: 30
  
  kubernetes:
    namespace: "ml-production"
    service_account: "credit-scoring-sa"
    image_pull_policy: "Always"
    
    resources:
      requests:
        cpu: "250m"
        memory: "512Mi"
        ephemeral-storage: "1Gi"
      limits:
        cpu: "1000m"
        memory: "2Gi"
        ephemeral-storage: "2Gi"
    
    autoscaling:
      min_replicas: 2
      max_replicas: 10
      target_cpu_utilization: 70
      target_memory_utilization: 80
    
    liveness_probe:
      path: "/health/live"
      initial_delay_seconds: 30
      period_seconds: 10
    
    readiness_probe:
      path: "/health/ready"
      initial_delay_seconds: 5
      period_seconds: 5

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  handlers:
    console:
      enabled: true
      level: "INFO"
    
    file:
      enabled: true
      level: "DEBUG"
      path: "logs/credit_scoring.log"
      max_size_mb: 100
      backup_count: 10
    
    json:
      enabled: true
      path: "logs/credit_scoring.json"
  
  metrics:
    enable_prometheus: true
    prometheus_port: 9090
    collect_interval_seconds: 15

dvc:
  remote: "s3"
  remote_url: "s3://credit-scoring-data"
  cache_dir: ".dvc/cache"
  
  data_paths:
    - "data/raw"
    - "data/processed/train.csv"
    - "data/processed/test.csv"
    - "data/processed/validation.csv"
    - "models/trained"

environments:
  development:
    debug: true
    log_level: "DEBUG"
    enable_profiling: true
    
  staging:
    debug: false
    log_level: "INFO"
    enable_profiling: false
    
  production:
    debug: false
    log_level: "WARNING"
    enable_profiling: false